name: Tests

on:
  pull_request:
  push:

defaults:
  run:
    shell: 'bash -Eeuo pipefail -x {0}'

jobs:

  deb822:
    name: deb822-json
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: ./tests/deb822.sh

  dsc:
    name: dsc
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: ./tests/dsc.sh
        # TODO dpkg-genbuildinfo is very slow on GitHub Actions (likely due to the large number of installed packages); it would help these tests a LOT to skip that for our dpkg-buildpackage invocations somehow
